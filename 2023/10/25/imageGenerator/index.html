<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>imageGenerator - Little Sheeeeep</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="CharlotteYang"><meta name="msapplication-TileImage" content="/img/logo.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="CharlotteYang"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="歌词-台词图像生成应用一、项目简介​        在当前的数字化时代，随着互联网技术、人工智能模型的不断发展，个性化体验和创意分享已经成为网络文化不可或缺的组成部分。AIGC成为炙手可热的话题,为人们的网络使用体验注入新活力.人们不再满足于被动接受信息，而是更加注重个性化的表达和创意的分享。本应用致力于创建一个简单易用的平台，让用户能够轻松搜索音乐歌词和影视中的台词，并且从中挑选出自己喜欢的歌词"><meta property="og:type" content="blog"><meta property="og:title" content="imageGenerator"><meta property="og:url" content="https://llragdoll.github.io/2023/10/25/imageGenerator/"><meta property="og:site_name" content="Little Sheeeeep"><meta property="og:description" content="歌词-台词图像生成应用一、项目简介​        在当前的数字化时代，随着互联网技术、人工智能模型的不断发展，个性化体验和创意分享已经成为网络文化不可或缺的组成部分。AIGC成为炙手可热的话题,为人们的网络使用体验注入新活力.人们不再满足于被动接受信息，而是更加注重个性化的表达和创意的分享。本应用致力于创建一个简单易用的平台，让用户能够轻松搜索音乐歌词和影视中的台词，并且从中挑选出自己喜欢的歌词"><meta property="og:locale" content="en_US"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps1.jpg"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps2.jpg"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps3.jpg"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps4.jpg"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps5.jpg"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps6.jpg"><meta property="og:image" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps7.jpg"><meta property="article:published_time" content="2023-10-25T07:40:03.000Z"><meta property="article:modified_time" content="2023-10-25T08:00:44.668Z"><meta property="article:author" content="Charlotte Yang"><meta property="article:tag" content="study"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps1.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://llragdoll.github.io/2023/10/25/imageGenerator/"},"headline":"imageGenerator","image":["file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps1.jpg","file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps2.jpg","file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps3.jpg","file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps4.jpg","file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps5.jpg","file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps6.jpg","file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps7.jpg"],"datePublished":"2023-10-25T07:40:03.000Z","dateModified":"2023-10-25T08:00:44.668Z","author":{"@type":"Person","name":"Charlotte Yang"},"publisher":{"@type":"Organization","name":"Little Sheeeeep","logo":{"@type":"ImageObject","url":"https://llragdoll.github.io/img/logo.svg"}},"description":"歌词-台词图像生成应用一、项目简介​        在当前的数字化时代，随着互联网技术、人工智能模型的不断发展，个性化体验和创意分享已经成为网络文化不可或缺的组成部分。AIGC成为炙手可热的话题,为人们的网络使用体验注入新活力.人们不再满足于被动接受信息，而是更加注重个性化的表达和创意的分享。本应用致力于创建一个简单易用的平台，让用户能够轻松搜索音乐歌词和影视中的台词，并且从中挑选出自己喜欢的歌词"}</script><link rel="canonical" href="https://llragdoll.github.io/2023/10/25/imageGenerator/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Little Sheeeeep" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-10-25T07:40:03.000Z" title="2023/10/25 15:40:03">2023-10-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-10-25T08:00:44.668Z" title="2023/10/25 16:00:44">2023-10-25</time></span><span class="level-item"><a class="link-muted" href="/categories/MicroService/">MicroService</a></span><span class="level-item">15 minutes read (About 2199 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">imageGenerator</h1><div class="content"><h1 id="歌词-台词图像生成应用"><a href="#歌词-台词图像生成应用" class="headerlink" title="歌词-台词图像生成应用"></a><strong>歌词-台词图像生成应用</strong></h1><h2 id="一、项目简介"><a href="#一、项目简介" class="headerlink" title="一、项目简介"></a>一、项目简介</h2><p>​        在当前的数字化时代，随着互联网技术、人工智能模型的不断发展，个性化体验和创意分享已经成为网络文化不可或缺的组成部分。AIGC成为炙手可热的话题,为人们的网络使用体验注入新活力.人们不再满足于被动接受信息，而是更加注重个性化的表达和创意的分享。本应用致力于创建一个简单易用的平台，让用户能够轻松搜索音乐歌词和影视中的台词，并且从中挑选出自己喜欢的歌词或台词进行图像生成。</p>
<p>​        通过本应用，用户可以轻松分享自己的感受，通过可视化的方式表达自己关于某些文字的情感和态度。本应用在满足用户对个性化创意追求的同时，也为用户提供了一个丰富多彩的网络文化体验,感受AIGC带来的新奇体验。</p>
<h2 id="二、配置和部署说明"><a href="#二、配置和部署说明" class="headerlink" title="二、配置和部署说明"></a>二、配置和部署说明</h2><h3 id="2-1配置情况"><a href="#2-1配置情况" class="headerlink" title="2.1配置情况"></a>2.1配置情况</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Node.js<span class="punctuation">:</span>v18<span class="number">.15</span><span class="number">.0</span></span><br><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@element-plus/icons-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;axios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.5.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;core-js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.8.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;element-plus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.3.14&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;openai&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.12.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.13&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vue-router&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.2.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vuex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.1.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>



<h3 id="2-2部署说明"><a href="#2-2部署说明" class="headerlink" title="2.2部署说明"></a>2.2部署说明</h3><p>本项目使用Ngnix部署到服务器<strong>47.96.30.31</strong>上,浏览器输入<a target="_blank" rel="noopener" href="http://47.96.30.31/%E5%8D%B3%E5%8F%AF%E8%AE%BF%E9%97%AE">http://47.96.30.31/即可访问</a>.</p>
<p>服务器为阿里云平台云服务器ECS,基本配置为:</p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps1.jpg" alt="img"> </p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps2.jpg" alt="img"> </p>
<h2 id="三、应用功能"><a href="#三、应用功能" class="headerlink" title="三、应用功能"></a>三、应用功能</h2><h3 id="1-歌曲-电影台词搜索"><a href="#1-歌曲-电影台词搜索" class="headerlink" title="1.歌曲&#x2F;电影台词搜索"></a>1.歌曲&#x2F;电影台词搜索</h3><p>用户可以通过关键词搜索他们喜欢的歌曲、歌手或影视，以便在平台上进行后续操作。在菜单栏进行目标切换.</p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps3.jpg" alt="img"> </p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps4.jpg" alt="img"> </p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps5.jpg" alt="img"> </p>
<h3 id="2-文字选择"><a href="#2-文字选择" class="headerlink" title="2.文字选择"></a>2.文字选择</h3><p>用户可以从详情页面中选择自己喜欢的歌词或台词，进而进行图像生成。</p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps6.jpg" alt="img"> </p>
<h3 id="4-自然语言处理"><a href="#4-自然语言处理" class="headerlink" title="4.自然语言处理"></a>4.自然语言处理</h3><p>利用ChatGPT接口，将用户选择的歌词&#x2F;台词转换成适合创作的关键词提供给作画api。</p>
<p><img src="file:////Users/apple/Library/Containers/com.kingsoft.wpsoffice.mac/Data/tmp/wps-apple/ksohtml//wps7.jpg" alt="img"> </p>
<h3 id="5-多接口整合"><a href="#5-多接口整合" class="headerlink" title="5.多接口整合"></a>5.多接口整合</h3><p>整合音乐API，以获取歌曲、歌词等信息，整合影视API，以获取影视经典台词，同时调用、chatGPT、stable Diffusion等api，实现图像生成。</p>
<h2 id="四、应用实现"><a href="#四、应用实现" class="headerlink" title="四、应用实现"></a>四、应用实现</h2><h3 id="1-前端结构"><a href="#1-前端结构" class="headerlink" title="1.前端结构"></a>1.前端结构</h3><p>src文件夹下路径结构:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── App.vue</span><br><span class="line">├── assets</span><br><span class="line">│   └── logo.png</span><br><span class="line">├── components</span><br><span class="line">│   ├── firstPageTwo.vue</span><br><span class="line">│   ├── fourthPage.vue</span><br><span class="line">│   ├── fourthPageLines.vue</span><br><span class="line">│   ├── myNavTwo.vue</span><br><span class="line">│   ├── secondPage.vue</span><br><span class="line">│   ├── secondPageLines.vue</span><br><span class="line">│   ├── thirdPage.vue</span><br><span class="line">│   └── thirdPageLines.vue</span><br><span class="line">├── main.js</span><br><span class="line">├── router</span><br><span class="line">│   └── index.js</span><br><span class="line">└── store</span><br><span class="line">    └── index.js</span><br></pre></td></tr></table></figure>

<p> 其中:</p>
<p>App.vue文件是整个应用的布局,使用el-container容器,包裹el-header(导航栏)、el-main(页面主体内容)、el-footer(页面底部),其中el-main中为router-view,根据路由展示不同组件.</p>
<p>components目录包括了应用的各个组件,包括:导航栏内容、首页内容、搜索页面结果(音乐&#x2F;媒体)、详情页面(音乐&#x2F;媒体)、绘图展示页面(音乐&#x2F;媒体).</p>
<p>图片等资源文件存放在与src文件夹同级的public目录下.</p>
<p>router目录下存放路由配置,store目录下存放容器,保存用户选择状态–音乐或者影视.</p>
<h3 id="2-api调用"><a href="#2-api调用" class="headerlink" title="2.api调用"></a>2.api调用</h3><h4 id="1-搜索结果"><a href="#1-搜索结果" class="headerlink" title="(1)搜索结果"></a>(1)搜索结果</h4><p>​        在组件实例创建之前调用onMounted函数,使用首页传递来的queryString向音乐&#x2F;影视网站发出GET请求,获取所需信息:音乐方面包括歌曲名、艺人名、照片、ID;影视方面包括名字、类型、图片、年份、ID等信息,存入数组中并展示.</p>
<p>以音乐的js代码为例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted,ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queryString=<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> topThreeSongsArray=<span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> topThreeSingerArray=<span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> topThreeImageArray=<span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> topThreeIdArray=<span class="title function_">ref</span>([])</span><br><span class="line"><span class="comment">//跳转到歌词页面</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getLyrics</span> = (<span class="params">index</span>) =&gt; &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/thirdPage&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">queryString</span>: topThreeIdArray.<span class="property">value</span>[index-<span class="number">1</span>] &#125;&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//获取搜索结果</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getResults</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(queryString)</span><br><span class="line">    <span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://genius-song-lyrics1.p.rapidapi.com/search/&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">q</span>: queryString.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">per_page</span>: <span class="string">&#x27;10&#x27;</span>,</span><br><span class="line">        <span class="attr">page</span>: <span class="string">&#x27;1&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;X-RapidAPI-Key&#x27;</span>: <span class="string">&#x27;e5b6cf43b5msh082c9a6af43d8c7p10b48cjsn744f05e11812&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-RapidAPI-Host&#x27;</span>: <span class="string">&#x27;genius-song-lyrics1.p.rapidapi.com&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">request</span>(options);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">const</span> topThreeSongs2 = response.<span class="property">data</span>.<span class="property">hits</span>.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">9</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">title</span>: item.<span class="property">result</span>.<span class="property">title</span>,</span><br><span class="line">            <span class="attr">artist</span>: item.<span class="property">result</span>.<span class="property">primary_artist</span>.<span class="property">name</span>,</span><br><span class="line">            <span class="attr">albumImage</span>: item.<span class="property">result</span>.<span class="property">song_art_image_url</span>,</span><br><span class="line">            <span class="attr">id</span>:item.<span class="property">result</span>.<span class="property">id</span></span><br><span class="line">        &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;topThreeSongs2.<span class="property">length</span>;i++)&#123;</span><br><span class="line">            topThreeSongsArray.<span class="property">value</span>.<span class="title function_">push</span>(topThreeSongs2[i].<span class="property">title</span>)</span><br><span class="line">            topThreeSingerArray.<span class="property">value</span>.<span class="title function_">push</span>(topThreeSongs2[i].<span class="property">artist</span>)</span><br><span class="line">            topThreeImageArray.<span class="property">value</span>.<span class="title function_">push</span>(topThreeSongs2[i].<span class="property">albumImage</span>)</span><br><span class="line">            topThreeIdArray.<span class="property">value</span>.<span class="title function_">push</span>(topThreeSongs2[i].<span class="property">id</span>)</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 从路由的 query 参数中获取</span></span><br><span class="line">  queryString.<span class="property">value</span> = router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">query</span>.<span class="property">queryString</span>;</span><br><span class="line">  <span class="title function_">getResults</span>();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-详情展示"><a href="#2-详情展示" class="headerlink" title="(2)详情展示"></a>(2)详情展示</h4><p>​        用户在结果页点击获取详情,跳转至详情页;在组件实例创建之前调用onMounted函数,使用搜索结果页传递来的ID获取详细信息:音乐方面包括歌名、歌手图片、歌手名称、专辑图片、专辑名称、发行日期,以及获取全部歌词;影视方面包括名称、类型、图片、日期、种类、大体情节,以及经典台词.</p>
<p>以音乐的js为例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted,ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Upload</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span>,<span class="title class_">ElLoading</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">OpenAI</span> <span class="keyword">from</span> <span class="string">&quot;openai&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"><span class="keyword">const</span> selectedLyrics=<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> queryString=<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> songTitle=<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> artistName = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> albumTitle  =<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> releaseDate = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> albumImage  =<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> singerImage  =<span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fullLyrics=<span class="title function_">ref</span>()</span><br><span class="line"><span class="comment">//获取歌曲详情</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSongDetail</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://genius-song-lyrics1.p.rapidapi.com/song/details/&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;<span class="attr">id</span>: queryString.<span class="property">value</span>&#125;,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;X-RapidAPI-Key&#x27;</span>: <span class="string">&#x27;e5b6cf43b5msh082c9a6af43d8c7p10b48cjsn744f05e11812&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-RapidAPI-Host&#x27;</span>: <span class="string">&#x27;genius-song-lyrics1.p.rapidapi.com&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">request</span>(options);</span><br><span class="line">        songTitle.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">song</span>.<span class="property">title</span>;</span><br><span class="line">        albumTitle.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">song</span>.<span class="property">album</span>.<span class="property">name</span>;</span><br><span class="line">        artistName.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">song</span>.<span class="property">primary_artist</span>.<span class="property">name</span>;</span><br><span class="line">        releaseDate.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">song</span>.<span class="property">release_date_for_display</span>;</span><br><span class="line">        albumImage.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">song</span>.<span class="property">album</span>.<span class="property">cover_art_url</span>;</span><br><span class="line">        singerImage.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">song</span>.<span class="property">primary_artist</span>.<span class="property">image_url</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取歌词</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getSongLyrics</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://genius-song-lyrics1.p.rapidapi.com/song/lyrics/&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;<span class="attr">id</span>: queryString.<span class="property">value</span>&#125;,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;X-RapidAPI-Key&#x27;</span>: <span class="string">&#x27;e5b6cf43b5msh082c9a6af43d8c7p10b48cjsn744f05e11812&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-RapidAPI-Host&#x27;</span>: <span class="string">&#x27;genius-song-lyrics1.p.rapidapi.com&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">request</span>(options);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">        fullLyrics.<span class="property">value</span>=response.<span class="property">data</span>.<span class="property">lyrics</span>.<span class="property">lyrics</span>.<span class="property">body</span>.<span class="property">html</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 从路由的 query 参数中获取</span></span><br><span class="line">  queryString.<span class="property">value</span> = router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">query</span>.<span class="property">queryString</span>;</span><br><span class="line">  <span class="title function_">getSongDetail</span>();</span><br><span class="line">  <span class="title function_">getSongLyrics</span>();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-生成图片"><a href="#3-生成图片" class="headerlink" title="(3)生成图片"></a>(3)生成图片</h4><p>​        点击generate按钮后,首先将文本框内的内容作为content,使用OpenAI接口,让其返回10个prompts;接着,使用这10个prompts调用stable Diffusion的api,让其生成图片,得到最终图片的url,并传递给最后的页面.</p>
<p>以音乐的js为例:</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">generateImage</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Please be patient,your image is being painted...&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line">    <span class="comment">//获取prompts</span></span><br><span class="line">    <span class="keyword">const</span> openai = <span class="keyword">new</span> <span class="title class_">OpenAI</span>(&#123;</span><br><span class="line">  <span class="attr">apiKey</span>: <span class="string">&quot;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&quot;</span>,</span><br><span class="line">  <span class="attr">dangerouslyAllowBrowser</span>:<span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">   </span><br><span class="line">    selectedLyrics.<span class="property">value</span> = <span class="string">&quot;I will give you some sentences, and you just give me 10 key words for all sentences in total.Don&#x27;t give me anything else,just 10 key words.&quot;</span> + selectedLyrics.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> openai.<span class="property">chat</span>.<span class="property">completions</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">model</span>: <span class="string">&quot;gpt-3.5-turbo&quot;</span>,</span><br><span class="line">    <span class="attr">messages</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: selectedLyrics.<span class="property">value</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">temperature</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">max_tokens</span>: <span class="number">256</span>,</span><br><span class="line">    <span class="attr">top_p</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">frequency_penalty</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">presence_penalty</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">choices</span>[<span class="number">0</span>].<span class="property">message</span>.<span class="property">content</span>);</span><br><span class="line">        resultPrompts.<span class="property">value</span>=response.<span class="property">choices</span>[<span class="number">0</span>].<span class="property">message</span>.<span class="property">content</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> resultpromptsValue = resultPrompts.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    resultpromptsValue+=<span class="string">&#x27;11.masterpiece&#x27;</span></span><br><span class="line">    resultPrompts.<span class="property">value</span>=resultpromptsValue</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(resultPrompts.<span class="property">value</span>)</span><br><span class="line">    printedResultPrompts.<span class="property">value</span>=resultPrompts.<span class="property">value</span>.<span class="title function_">replace</span>(<span class="string">&#x27;11.masterpiece&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(printedResultPrompts.<span class="property">value</span>)</span><br><span class="line">    <span class="comment">//获取生成图片任务的uid</span></span><br><span class="line"><span class="keyword">const</span> requestInfo = &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;https://23329.o.apispace.com/aigc/txt2img&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;X-APISpace-Token&quot;</span>: <span class="string">&quot;8qdtf7fect98p1dzkkath5hw5ju5ow1e&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Authorization-Type&quot;</span>: <span class="string">&quot;apikey&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">task</span>: <span class="string">&quot;txt2img.sd&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">model</span>: <span class="string">&quot;anime&quot;</span>,</span><br><span class="line">      <span class="attr">text</span>:resultPrompts.<span class="property">value</span>,</span><br><span class="line">      <span class="attr">w</span>: <span class="number">750</span>,</span><br><span class="line">      <span class="attr">h</span>: <span class="number">512</span>,</span><br><span class="line">      <span class="attr">guidance_scale</span>: <span class="number">14</span>,</span><br><span class="line">      <span class="attr">negative_prompt</span>: <span class="string">&quot;cropped, blurred, mutated, error, lowres, blurry, low quality, username, signature, watermark, text, nsfw, missing limb, fused hand, missing hand, extra limbs, malformed limbs, bad hands, extra fingers, fused fingers, missing fingers, bad breasts, deformed, mutilated, morbid, bad anatomy&quot;</span>,</span><br><span class="line">      <span class="attr">sampler</span>: <span class="string">&quot;k_euler&quot;</span>,</span><br><span class="line">      <span class="attr">seed</span>: <span class="number">1072366942</span>,</span><br><span class="line">      <span class="attr">num_steps</span>: <span class="number">25</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">model</span>: <span class="string">&quot;anime&quot;</span>,</span><br><span class="line">    <span class="attr">text</span>:</span><br><span class="line">      resultPrompts.<span class="property">value</span>,</span><br><span class="line">      <span class="attr">w</span>: <span class="number">750</span>,</span><br><span class="line">      <span class="attr">h</span>: <span class="number">512</span>,</span><br><span class="line">      <span class="attr">guidance_scale</span>: <span class="number">14</span>,</span><br><span class="line">      <span class="attr">negative_prompt</span>: <span class="string">&quot;cropped, blurred, mutated, error, lowres, blurry, low quality, username, signature, watermark, text, nsfw, missing limb, fused hand, missing hand, extra limbs, malformed limbs, bad hands, extra fingers, fused fingers, missing fingers, bad breasts, deformed, mutilated, morbid, bad anatomy&quot;</span>,</span><br><span class="line">      <span class="attr">sampler</span>: <span class="string">&quot;k_euler&quot;</span>,</span><br><span class="line">      <span class="attr">seed</span>: <span class="number">1072366942</span>,</span><br><span class="line">      <span class="attr">num_steps</span>: <span class="number">25</span>,</span><br><span class="line">      <span class="attr">notify_url</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response2 = <span class="keyword">await</span> axios.<span class="title function_">request</span>(requestInfo);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response2)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response2.<span class="property">data</span>.<span class="property">data</span>.<span class="property">uid</span>);</span><br><span class="line">        <span class="keyword">const</span> resultuid=response2.<span class="property">data</span>.<span class="property">data</span>.<span class="property">uid</span></span><br><span class="line">        resultUid.<span class="property">value</span>=resultuid</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//加载组件</span></span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title class_">ElLoading</span>.<span class="title function_">service</span>(&#123;</span><br><span class="line">        <span class="attr">lock</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;Painting&#x27;</span>,</span><br><span class="line">        <span class="attr">background</span>: <span class="string">&#x27;rgba(255, 255, 255, 0.5)&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        loading.<span class="title function_">close</span>()</span><br><span class="line">    &#125;, <span class="number">10000</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//延迟10秒获取url</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="title function_">async</span>()=&gt;&#123;</span><br><span class="line">        <span class="keyword">const</span> requestInfo2 = &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;https://23329.o.apispace.com/aigc/query-image&quot;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&quot;X-APISpace-Token&quot;</span>: <span class="string">&quot;8qdtf7fect98p1dzkkath5hw5ju5ow1e&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Authorization-Type&quot;</span>: <span class="string">&quot;apikey&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">uid</span>: resultUid.<span class="property">value</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response3 = <span class="keyword">await</span> axios.<span class="title function_">request</span>(requestInfo2);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(response3)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(response3.<span class="property">data</span>.<span class="property">data</span>.<span class="property">cdn</span>);</span><br><span class="line">            <span class="keyword">const</span> resulturl=response3.<span class="property">data</span>.<span class="property">data</span>.<span class="property">cdn</span></span><br><span class="line">            resultUrl.<span class="property">value</span>=resulturl</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        finalQueryString.<span class="property">value</span>=resultUrl.<span class="property">value</span>+<span class="string">&#x27;+&#x27;</span>+printedResultPrompts.<span class="property">value</span></span><br><span class="line">        router.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/fourthPage&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">finalQueryString</span>: finalQueryString.<span class="property">value</span> &#125;&#125;)</span><br><span class="line">    &#125;,<span class="number">10000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="五、Web-API文档"><a href="#五、Web-API文档" class="headerlink" title="五、Web API文档"></a>五、Web API文档</h2><p><strong>Apifox接口文档(已整合):</strong></p>
<p><strong><a target="_blank" rel="noopener" href="https://apifox.com/apidoc/shared-a527c342-822e-4ab2-8ecd-05c76645b34a/api-119010480">https://apifox.com/apidoc/shared-a527c342-822e-4ab2-8ecd-05c76645b34a/api-119010480</a></strong></p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/study/">study</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/10/25/TCPLab/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">TCPLab</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/10/25/MyFirstBlog/"><span class="level-item">MyFirstBlog</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://llragdoll.github.io/2023/10/25/imageGenerator/';
            this.page.identifier = '2023/10/25/imageGenerator/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + '🐶' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.svg" alt="CharlotteYang"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">CharlotteYang</p><p class="is-size-6 is-block">Be happy😊</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shanghai</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">2</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/llRagdoll" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/llRagdoll"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#歌词-台词图像生成应用"><span class="level-left"><span class="level-item">1</span><span class="level-item">歌词-台词图像生成应用</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#一、项目简介"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">一、项目简介</span></span></a></li><li><a class="level is-mobile" href="#二、配置和部署说明"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">二、配置和部署说明</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-1配置情况"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">2.1配置情况</span></span></a></li><li><a class="level is-mobile" href="#2-2部署说明"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">2.2部署说明</span></span></a></li></ul></li><li><a class="level is-mobile" href="#三、应用功能"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">三、应用功能</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-歌曲-电影台词搜索"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">1.歌曲/电影台词搜索</span></span></a></li><li><a class="level is-mobile" href="#2-文字选择"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">2.文字选择</span></span></a></li><li><a class="level is-mobile" href="#4-自然语言处理"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">4.自然语言处理</span></span></a></li><li><a class="level is-mobile" href="#5-多接口整合"><span class="level-left"><span class="level-item">1.3.4</span><span class="level-item">5.多接口整合</span></span></a></li></ul></li><li><a class="level is-mobile" href="#四、应用实现"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">四、应用实现</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-前端结构"><span class="level-left"><span class="level-item">1.4.1</span><span class="level-item">1.前端结构</span></span></a></li><li><a class="level is-mobile" href="#2-api调用"><span class="level-left"><span class="level-item">1.4.2</span><span class="level-item">2.api调用</span></span></a></li></ul></li><li><a class="level is-mobile" href="#五、Web-API文档"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">五、Web API文档</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/MicroService/"><span class="level-start"><span class="level-item">MicroService</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/research/"><span class="tag">research</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/study/"><span class="tag">study</span><span class="tag">5</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://47.96.30.31" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ImageGenerator</span></span><span class="level-right"><span class="level-item tag">47.96.30.31</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-25T07:47:05.000Z">2023-10-25</time></p><p class="title"><a href="/2023/10/25/dataExamineLab/">dataExamineLab</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-25T07:46:34.000Z">2023-10-25</time></p><p class="title"><a href="/2023/10/25/EthernetLab/">EthernetLab</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-25T07:44:58.000Z">2023-10-25</time></p><p class="title"><a href="/2023/10/25/UDPLab/">UDPLab</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-25T07:44:44.000Z">2023-10-25</time></p><p class="title"><a href="/2023/10/25/TCPLab/">TCPLab</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-25T07:40:03.000Z">2023-10-25</time></p><p class="title"><a href="/2023/10/25/imageGenerator/">imageGenerator</a></p><p class="categories"><a href="/categories/MicroService/">MicroService</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Little Sheeeeep" height="28"></a><p class="is-size-7"><span>&copy; 2023 Charlotte Yang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/llRagdoll"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>